(function(document,window,$){var app={initialize:function(){this.setUpListeners();this.domReady()},setUpListeners:function(){$(".form").on("submit",app.submitForm);$(".form").on("keydown","input",app.actionInputKeydown)},submitForm:function(e){e.preventDefault();var form=$(this),submitBtn=form.find(".btn-submit");if(app.validateForm(form)===false)return false;submitBtn.attr("disabled","disabled");var str=form.serialize();$.ajax({url:"mail.php",type:"POST",data:str}).done(function(msg){if(msg==="OK"){var result='<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Закрыть</span></button><div class="bg-success">Спасибо! Мы Вам перезвоним в самое ближайшее время!</div>';form.html(result)}}).always(function(){submitBtn.removeAttr("disabled")})},validateForm:function(form){var inputs=form.find("input"),valid=true;inputs.tooltip("destroy");$.each(inputs,function(index,val){var input=$(val),val=input.val(),formGroup=input.parents(".form-group"),textError="Введите телефон";if(val.length===0){formGroup.addClass("has-error").removeClass("has-success");input.tooltip({trigger:"manual",placement:"right",title:textError}).tooltip("show");valid=false}else{formGroup.addClass("has-success").removeClass("has-error")}});return valid},actionInputKeydown:function(e){app.removeError();var form=e.target.form;app.validateForm($(form))},removeError:function(){$(this).tooltip("destroy").parents(".form-group").removeClass("has-error")},domReady:function(){$(document).ready(function(){var onload=function(){var wh=$(window).height(),fblock=$("#first"),fsh=fblock.outerHeight();if(fsh<wh){fblock.outerHeight(wh)}};onload();$(window).resize(onload());$("body").click(function(){if($(".otherbg").hasClass("active")){$("#program2").addClass("bg2")}else{$("#program2").removeClass("bg2")}});$("#bxslider1").bxSlider({pagerCustom:"#bx-pager",mode:"fade"});$("#bxslider2").bxSlider({pagerCustom:"#bx-pager2",mode:"fade"});$("#bxSlider3").bxSlider({adaptiveHeight:true,mode:"fade",useCSS:false});$("#bxslider4").bxSlider({adaptiveHeight:true,mode:"fade",useCSS:false});(new WOW).init();smoothScroll.init({speed:500,easing:"easeInOutCubic",updateURL:false,callbackBefore:function(){},callbackAfter:function(){}});$(".nav__lnk").click(function(e){e.preventDefault();$(this).tab("show")});$(".tips").powerTip({placement:"n"});$("#countdown").countdown({until:new Date(2015,3-1,16)});$(".thumb__lnk").on("click",function(event){event.preventDefault();var $this=$(this),href=this.href,youtube_id=href.match(/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/ ]{11})/i)[1],thumb=$this.parent(".thumb");$("#video").html('<iframe width="730" height="411" src="https://www.youtube.com/embed/'+youtube_id+'?rel=0&amp;showinfo=0&amp;autoplay=1" frameborder="0" allowfullscreen></iframe>');$(".thumb__state_active").removeClass("thumb__state_active");thumb.addClass("thumb__state_active")})})}};app.initialize()})(document,window,jQuery);$(function(){var isMobile,$headerPhoneButton,ww;ww=$(window).width();isMobile=ww>810;$headerPhoneButton=$("#phone");if(isMobile){$headerPhoneButton.on("click",function(e){e.preventDefault();$("#callback").reveal()})}$(".callme-form").submit(function(e){e.preventDefault();var $form,formButton,$phone,formData,value,phoneRegEx;$form=$(this);formButton=$form.find("[type=submit]");$phone=$form.find(".form-phone");phoneRegEx=/^(\+?\d+\s*)?(\(\d+\))?\s*-?\s*([\d\- ]*)$/i;value=$phone.val();formButton.attr("disabled","disabled");if(value===""){alert("Пожалуйста, введите свой контактный телефон");formButton.removeAttr("disabled");$phone.focus();return false}else{if(!phoneRegEx.test(value)){alert("Пожалуйста, введите КОРРЕКТНЫЙ номер телефона!");formButton.removeAttr("disabled");$phone.focus();return false}}formData=$form.serialize();$.post("callme2.php",formData,function(data){if(data.result===true){alert("Ваша заявка успешно отправлена. В ближайшее время наши менеджеры обязательно Вам перезвонят. Спасибо.");$form.get(0).reset()}else{alert("Произошла ошибка, попробуйте позднее");console.log(data)}formButton.removeAttr("disabled")},"json");return false})});

/*
 *
 * Copyright (c) 2010 C. F., Wong (<a href="http://cloudgen.w0ng.hk">Cloudgen Examplet Store</a>)
 * Licensed under the MIT License:
 * http://www.opensource.org/licenses/mit-license.php
 *
 */
﻿(function(k,e,i,j){k.fn.caret=function(b,l){var a,c,f=this[0],d=k.browser.msie;if(typeof b==="object"&&typeof b.start==="number"&&typeof b.end==="number"){a=b.start;c=b.end}else if(typeof b==="number"&&typeof l==="number"){a=b;c=l}else if(typeof b==="string")if((a=f.value.indexOf(b))>-1)c=a+b[e];else a=null;else if(Object.prototype.toString.call(b)==="[object RegExp]"){b=b.exec(f.value);if(b!=null){a=b.index;c=a+b[0][e]}}if(typeof a!="undefined"){if(d){d=this[0].createTextRange();d.collapse(true);
d.moveStart("character",a);d.moveEnd("character",c-a);d.select()}else{this[0].selectionStart=a;this[0].selectionEnd=c}this[0].focus();return this}else{if(d){c=document.selection;if(this[0].tagName.toLowerCase()!="textarea"){d=this.val();a=c[i]()[j]();a.moveEnd("character",d[e]);var g=a.text==""?d[e]:d.lastIndexOf(a.text);a=c[i]()[j]();a.moveStart("character",-d[e]);var h=a.text[e]}else{a=c[i]();c=a[j]();c.moveToElementText(this[0]);c.setEndPoint("EndToEnd",a);g=c.text[e]-a.text[e];h=g+a.text[e]}}else{g=
f.selectionStart;h=f.selectionEnd}a=f.value.substring(g,h);return{start:g,end:h,text:a,replace:function(m){return f.value.substring(0,g)+m+f.value.substring(h,f.value[e])}}}}})(jQuery,"length","createRange","duplicate");







/**
 * GroupInputs v. 0.8.3
 * @author Pavel Kornilov <pk@ostrovok.ru> <lusever@lusever.com>
 * https://github.com/lusever/groupinputs
 * MIT Licensed
 */
(function($){'use strict';function m(j,h,a){var l;if(void 0!==h)j.setSelectionRange?j.setSelectionRange(h,a):document.selection&&document.selection.createRange&&(l=j.createTextRange(),l.collapse(!0),l.moveEnd("character",a),l.moveStart("character",h),l.select());else{a=h=0;if("selectionStart"in j)h=j.selectionStart,a=j.selectionEnd;else if(j.createTextRange){l=document.selection.createRange();var n=l.duplicate();l.parentElement()===j&&(h=-n.moveStart("character",-1E5),a=h+l.text.length)}return{start:h,end:a}}}
var p=!!window.opera,q="maxlength";
$.fn.groupinputs=function(){function j(e,d){var b=e[0].value,c=m(e[0]).end,f=b.slice(0,c),g=b.slice(c),j=d.a-g.length,h=!1,k;for(k=a.length-1;k>d.index;k--)j+=l[k]-a[k].value.length;f.length>j&&(f=f.slice(0,j),c=j);if(b.length>d.a){e[0].value=(f+g).slice(0,d.a);c<=d.a&&(m(e[0],c,c),h=!0);b=(f+g).slice(d.a);if(b.length)for(c-=Math.min(d.a,f.length);a[++k];){f=l[k];b+=a[k].value;a.eq(k).val(b.slice(0,f)).change();if(b.length<=f)break;g=a[k].value.length;h||(c<f&&(h=!0,a.eq(k).focus(),m(a[k],c,
c)),c-=g);b=b.slice(f)}h||(a.eq(k).focus(),m(a[k],c,c))}}function h(e){var d=e.type,b=e.data,c=e.data.c,f=e.data.index,g;p&&"keypress"===d&&(d="keydown");"keydown"===d&&39===e.keyCode&&(g=m(c[0]),g.start===this.value.length&&f!==a.length-1&&(a.eq(f+1).focus(),m(a[f+1],0,0),e.preventDefault()));if("keydown"===d&&(8===e.keyCode||37===e.keyCode))if(g=m(c[0]),g.start===g.end&&0===g.start&&0!==f){g=a.eq(f-1);var h=g.val().length;g.focus();m(g[0],h,h);37===e.keyCode&&e.preventDefault()}if("keyup"===d||
"keydown"===d){if(48>e.keyCode)return;if("keyup"===d&&b.b){b.b=!1;return}if(e.metaKey){b.b=!0;return}g=m(c[0]);g.start===g.end&&(g.start===this.value.length&&f!==a.length-1&&this.value.length===b.a)&&(a.eq(f+1).focus(),m(a[f+1],0,0))}"paste"===d&&c.attr(q,n);("propertychange"===d||"input"===d)&&c.attr(q)!==b.a&&setTimeout(function(){j(c,b);c.attr(q,b.a)},0);"input"===d&&p&&j(c,b)}if(/iPad|iPhone/.test(navigator.platform))return this;var a=this,l=[],n=0;a.each(function(e){var d=a.eq(e),b=+d.attr(q);
n+=b;l.push(b);d.on("keydown keypress keyup input paste propertychange",{c:d,index:e,a:b},h)});p&&a.attr(q,n);return a};})(jQuery);







(function($) {
	var ts = new Date(2015, 9, 22, 20, 00);
	$('.countdown').countdown({
		until: ts,
		timezone: +3,
		alwaysExpire: true,
		onExpiry: function() {
      $('.oldprice').css("text-decoration","none");
      $('.newprice').hide();
	},
	});
})(jQuery);
        